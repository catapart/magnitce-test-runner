var T=`:host\r
{\r
    \r
    --gap-small: 7px;\r
    --gap: 14px;\r
\r
    --surface-menu: oklch(99.4% 0 0);\r
    --surface-button: oklch(62.39% 0.181 258.33);\r
    --surface-button-hover: oklch(68.39% 0.181 258.33);\r
    --surface-button-active: oklch(50.39% 0.181 258.33);\r
\r
    --surface-success: oklch(93.96% 0.05 148.74);\r
    --surface-fail: oklch(88.98% 0.052 3.28);\r
    --surface-process: oklch(89.66% 0.046 260.67);\r
\r
    --text-surface: oklch(14.38% 0.007 256.88);\r
    --text-button: oklch(99.4% 0 0);\r
\r
    --border-test: solid 1px oklch(63.12% 0.004 219.55);\r
    --border-success: solid 1px oklch(58.83% 0.158 145.05);\r
    --border-fail: solid 1px oklch(45.8% 0.177 17.7);\r
    --border-process: solid 1px oklch(43.48% 0.17 260.2);\r
\r
    --border-button: solid 1px oklch(62.39% 0.181 258.33);\r
\r
    --info-icon: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2022.812714%2022.814663%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20style%3D%22fill%3Atransparent%3Bstroke%3Atransparent%3Bstroke-width%3A0.999999%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dasharray%3Anone%3Bstroke-dashoffset%3A29.2913%3Bstroke-opacity%3A1%22%20d%3D%22M%2022.295505%2C11.407332%20A%2010.889144%2C10.889144%200%200%201%2011.406424%2C22.296479%2010.889144%2C10.889144%200%200%201%200.51720881%2C11.407332%2010.889144%2C10.889144%200%200%201%2011.406424%2C0.51818382%2010.889144%2C10.889144%200%200%201%2022.295505%2C11.407332%20Z%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22m%2013.945668%2C4.3053761%20c%200.150778%2C-0.96462%20-0.30687%2C-1.43709%20-1.36997%2C-1.43709%20-1.063%2C0%20-1.668452%2C0.47247%20-1.81923%2C1.43709%20-0.150779%2C0.96462%200.306971%2C1.43708%201.369971%2C1.43708%201.004%2C0%201.66845%2C-0.47246%201.819229%2C-1.43708%20z%20M%2011.693889%2C17.829726%2013.373994%2C7.0811161%20h%20-2.9333%20L%208.7605887%2C17.829726%20Z%22%20style%3D%22font-size%3A19.6861px%3Bfont-family%3APassageway%3B-inkscape-font-specification%3APassageway%3Bfill%3A%23a30d30%3Bstroke-width%3A2.5%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dashoffset%3A29.2913%22%20aria-label%3D%22i%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E');\r
\r
    --font-size: 12px;\r
    --font-text: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\r
    \r
\r
    color-scheme: light dark;\r
    display: grid;\r
    grid-template-columns: 400px 1fr;\r
    overflow: hidden;\r
    font-size: var(--font-size);\r
    font-family: var(--font-text);\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --surface-menu: oklch(25.11% 0.006 258.36);\r
\r
        --text-surface: oklch(99.4% 0 0);\r
        /* --text-result: oklch(99.4% 0 0); */\r
\r
        /* --surface-test: oklch(25.11% 0.006 258.36);\r
        --surface-test-summary: oklch(35.02% 0.005 236.66); */\r
    }\r
}\r
\r
#app-menu\r
{\r
    background-color: var(--surface-menu);\r
    display: grid;\r
    grid-template-rows: auto auto 1fr auto;\r
    margin: 0;\r
    padding: 0;\r
    overflow: hidden;\r
}\r
\r
#app-header\r
{\r
    display: grid;\r
    grid-template-columns: auto 1fr auto;\r
    gap: var(--gap-small);\r
    padding: var(--gap-small);\r
}\r
\r
#title\r
{\r
    font-size: 16px;\r
    font-weight: bold;\r
}\r
\r
#test-groups\r
{\r
    overflow: hidden;\r
    display: grid;\r
    grid-template-rows: auto 1fr;\r
}\r
\r
#test-groups-header\r
,#analyst-queue-summary\r
{\r
    padding: var(--gap-small);\r
    font-weight: bold;\r
}\r
\r
#test-groups-header\r
{\r
    border-bottom: solid 1px;\r
}\r
\r
#test-group-items\r
,#analyst-queue-items\r
{\r
    margin: 0;\r
    padding: 0;\r
    overflow: auto;\r
}\r
\r
summary\r
{\r
    display: grid;\r
    grid-template-columns: auto auto auto 1fr auto;\r
    gap: var(--gap-small);\r
    padding: var(--gap-small);\r
    align-items: center;\r
    user-select: none;\r
}\r
summary::before\r
{\r
    content: '';\r
    width: 12px;\r
    height: 12px;\r
    background: url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'14px'%20height%3D'14px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23878a8b'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");\r
    transform: rotate(-90deg);\r
    transition: transform ease-out 200ms;\r
}\r
[open] > summary::before\r
{\r
    transform: rotate(0);\r
}\r
\r
\r
code-tests::part(result-icon)\r
{\r
    --background-size: 16px;\r
    --icon-size: 12px;\r
}\r
code-tests::part(result-icon running)\r
{\r
    --icon-size: 10px;\r
}\r
code-tests::part(result-icon)::before\r
{\r
    font-size: 10px;\r
}\r
\r
/* .running::part(result-icon running)::before\r
{\r
    --size: 12px;\r
} */\r
\r
\r
#run-all\r
{\r
    width: auto;\r
    min-width: auto;\r
    max-width: auto;\r
    appearance: none;\r
    display: inline-flex;\r
    justify-content: center;\r
    align-items: center;\r
    padding: 3px 10px 3px 7px;\r
    font-size: 11px;\r
    gap: var(--gap-small);\r
    background: var(--surface-button);\r
    border: solid 1px var(--surface-button);\r
    border-radius: 4px;\r
    text-shadow: 1px 1px rgb(0 0 0 / .2);\r
    color: var(--text-button);\r
}\r
#run-all:hover\r
{\r
    background: var(--surface-button-hover);\r
}\r
#run-all:active\r
{\r
    background: var(--surface-button-active);\r
}\r
#run-all::before\r
{\r
    content: '';\r
    display: block;\r
    width: 16px;\r
    height: 16px;\r
    transform: rotate(-90deg);\r
    background: \r
    url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'16px'%20height%3D'16px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23fdfdfd'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");\r
}\r
\r
#app-footer\r
{\r
    padding: var(--gap-small);\r
}\r
\r
#subject\r
{\r
    overflow: auto;\r
}\r
\r
@media (max-width: 665px) \r
{\r
    :host\r
    {\r
        grid-template-columns: 1fr;\r
    }\r
}`;var S=`<menu id="app-menu" class="menu">\r
    <header id="app-header">\r
        <div id="title">Test Runner</div>\r
        <div id="app-options" class="options">\r
\r
        </div>\r
        <button type="button" id="run-all">\r
            <span id="run-button-label" class="button-label label icon">Run All Tests</span>\r
        </button>\r
    </header>\r
    <details id="analyst-queue">\r
        <summary id="analyst-queue-summary">Analyst Queue</summary>\r
        <ul id="analyst-queue-items" class="items"></ul>\r
    </details>\r
    <div id="test-groups">\r
        <header id="test-groups-header">Test Groups</header>\r
        <ul id="test-group-items" class="items"></ul>\r
    </div>\r
    <footer id="app-footer">\r
        <div id="app-results" class="results">\r
            <div id="passing-results" class="pill">\r
                <div id="passing-title" class="title">\r
                    <span id="passing-color" class="color"></span>\r
                    <span id="passing-label" class="label">Passing</span>\r
                </div>\r
                <div class="value"></div>\r
            </div>\r
            <div id="percentage">\r
                <div class="pass"></div>\r
                <div class="fail"></div>\r
                <div class="skip"></div>\r
                <div class="running"></div>\r
            </div>\r
        </div>\r
    </footer>\r
</menu>\r
<div id="subject">\r
    <slot id="subject-slot"></slot>\r
</div>`;var w=":not(slot,defs,g,rect,path,circle,ellipse,line,polygon,text,tspan,use,svg image,svg title,desc,template,template *)";function v(r){let t=[...r.querySelectorAll(`${w}[id]`)];for(let e=0;e<t.length;e++)t[e].part.add(t[e].id);let s=[...r.querySelectorAll(`${w}[class]`)];for(let e=0;e<s.length;e++)s[e].part.add(...s[e].classList)}function E(r,t){let s=[...r.querySelectorAll(`${w}`)];for(let e=0;e<s.length;e++){let a=s[e].tagName.toLowerCase();s[e].part.add(t?.[a]??a)}}function O(r,t=!1,s){let e=new Set([...r.querySelectorAll("[part]")].map(n=>{let i=[...n.part.values()].filter(o=>o!=null).map(o=>{let u=s?.[o];return u!=null?`${o}:${u}`:o}),l=n.getAttribute("exportparts");if(l!=null){let o=l.replaceAll(/[\s\n]/g,"").split(",").map(u=>u.indexOf(":")==-1?u:u.split(":")[1]);i=i.concat(...o)}return i}).flat().filter(n=>n.length>0));return Array.from(e).join(`,${t==!0?`
`:""}`)}function y(r,t=!1,s){let e=O(r,t,s),a=r.host.getAttribute("exportparts");r.host.setAttribute("exportparts",`${a==null?"":`${a},`}${e}`)}var q=`:host\r
{\r
    \r
    /* color-scheme: light dark; */\r
    display: grid;\r
    color: var(--text-surface); \r
    padding: var(--gap-small);\r
    /* font-family: var(--font-text); */\r
}\r
\r
::slotted(code-tests)\r
{\r
    /* background-color: var(--surface-test); */\r
}\r
\r
\r
summary\r
{\r
    display: grid;\r
    grid-template-columns: auto auto auto 1fr auto;\r
    gap: var(--gap-small);\r
    padding: var(--gap-small);\r
    align-items: center;\r
    user-select: none;\r
}\r
summary::before\r
{\r
    content: '';\r
    width: 12px;\r
    height: 12px;\r
    background: url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'14px'%20height%3D'14px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23878a8b'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");\r
    transform: rotate(-90deg);\r
    transition: transform ease-out 200ms;\r
}\r
[open] > summary::before\r
{\r
    transform: rotate(0);\r
    /* background: var(--surface-test-summary); */\r
}\r
\r
:host(.running) .run[data-all]\r
{\r
    color: var(--text-surface);\r
    background-color: oklch(89.68% 0.002 197.12);\r
    border-color: oklch(63.12% 0.004 219.55);\r
}\r
:host(.running) .run[data-all]:hover\r
{\r
    background-color: oklch(95.57% 0.003 286.35);\r
    border-color: oklch(63.12% 0.004 219.55);\r
}\r
:host(.running) .run[data-all]:active\r
{\r
    background-color: oklch(63.12% 0.004 219.55);\r
    border-color: oklch(53.12% 0.004 219.55);\r
}\r
:host(.running) .run[data-all]::before\r
{\r
    display: none;\r
}\r
\r
.result-icon\r
{\r
    --background-size: 16px;\r
    --icon-size: 12px;\r
\r
    width: var(--background-size);\r
    height: var(--background-size);\r
\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
\r
    border: solid 1px currentColor;\r
    border-radius: 50%;\r
}\r
.result-icon::before\r
{\r
    content: '\u22EF';\r
    font-size: 10px;\r
    --icon-size: 10px;\r
}\r
:host(.running) .result-icon\r
{\r
    border: var(--border-process);\r
    background: var(--surface-process);\r
}\r
:host(.success) .result-icon\r
{\r
    border: var(--border-success);\r
    background: var(--surface-success)\r
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path fill="%232e943a" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>');\r
    background-repeat: no-repeat;\r
    background-position: center;\r
    background-size: var(--icon-size) var(--icon-size);\r
}\r
:host(.fail) .result-icon\r
{\r
    border: var(--border-fail);\r
    background: var(--surface-fail)\r
    var(--info-icon);\r
    background-repeat: no-repeat;\r
    background-position: center;\r
    transform: rotate(175deg);\r
}\r
:host(:is(.success,.fail)) .result-icon::before\r
{\r
    display: none;\r
}\r
:host(.running) .result-icon::before\r
{\r
    content: '';\r
    --animation-timing-function: linear;\r
    --animation-duration: 2s;\r
    width: var(--icon-size, 10px);\r
    height: var(--icon-size, 10px);\r
    mask-image: radial-gradient(circle at 50% 50%, transparent calc(var(--icon-size, 10px) / 3), black calc(var(--icon-size, 10px) / 3));\r
    background-image: conic-gradient(transparent, transparent 135deg, var(--color, oklch(43.48% 0.17 260.2)));\r
    border-radius: 50%;\r
    animation: var(--animation-timing-function) var(--animation-duration) infinite spin;\r
    margin: 2px;\r
}\r
@keyframes spin\r
{\r
    from { transform: rotate(0deg); }\r
    to { transform: rotate(360deg); }\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host(.running) .run[data-all]\r
    {\r
        background-color: oklch(35.02% 0.005 236.66);\r
        border-color: oklch(35.02% 0.005 236.66);\r
    }\r
    :host(.running) .run[data-all]:hover\r
    {\r
        background-color: oklch(63.12% 0.004 219.55);\r
        border-color:oklch(63.12% 0.004 219.55);\r
    }\r
    :host(.running) .run[data-all]:active\r
    {\r
        background-color: oklch(25.11% 0.006 258.36);\r
        border-color: oklch(25.11% 0.006 258.36);\r
    }\r
}\r
\r
/* tooltip copied from https://blog.logrocket.com/creating-beautiful-tooltips-with-only-css/ */\r
.tooltip {\r
  position:relative; /* making the .tooltip span a container for the tooltip text */\r
  border-bottom:1px dashed #000; /* little indicater to indicate it's hoverable */\r
}\r
.tooltip:before {\r
  content: attr(data-text); /* here's the magic */\r
  position:absolute;\r
  \r
  /* vertically center */\r
  top:50%;\r
  transform:translateY(-50%);\r
  \r
  /* move to right */\r
  left:100%;\r
  margin-left:15px; /* and add a small left margin */\r
  \r
  /* basic styles */\r
  width:max-content;\r
  max-width: 300px;\r
  padding:10px;\r
  border-radius:10px;\r
  background:#000;\r
  color: #fff;\r
  text-align:center;\r
\r
  opacity:0;\r
  transition:.3s opacity; \r
  pointer-events: none;\r
}\r
.tooltip:after {\r
  content: "";\r
  position:absolute;\r
  \r
  /* position tooltip correctly */\r
  left:100%;\r
  margin-left:-5px;\r
 \r
  /* vertically center */\r
  top:50%;\r
  transform:translateY(-50%);\r
 \r
  /* the arrow */\r
  border:10px solid #000;\r
  border-color: transparent black transparent transparent;\r
  \r
  opacity:0;\r
  transition:.3s; \r
  pointer-events: none;\r
}\r
.tooltip:hover:before,.tooltip:hover:after{\r
  display:block;\r
  opacity:1;\r
}\r
\r
\r
.run\r
{\r
    width: auto;\r
    min-width: auto;\r
    max-width: auto;\r
    appearance: none;\r
    display: inline-flex;\r
    justify-content: center;\r
    align-items: center;\r
    padding: 3px 10px 3px 7px;\r
    font-size: 11px;\r
    gap: var(--gap-small);\r
    background: var(--surface-button);\r
    border: solid 1px var(--surface-button);\r
    border-radius: 4px;\r
    text-shadow: 1px 1px rgb(0 0 0 / .2);\r
    color: var(--text-button);\r
}\r
.run:hover\r
{\r
    background: var(--surface-button-hover);\r
}\r
.run:active\r
{\r
    background: var(--surface-button-active);\r
}\r
.run::before\r
{\r
    content: '';\r
    display: block;\r
    width: 16px;\r
    height: 16px;\r
    transform: rotate(-90deg);\r
    background: \r
    url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'16px'%20height%3D'16px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23fdfdfd'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");\r
}`;var F=`<details id="details">\r
    <summary id="summary">\r
        <div class="result-icon"></div>\r
        <span id="enable-container" class="tooltip" data-text="Enable Tests?">\r
            <input type="checkbox" id="enable-value" title="Enable Tests?" class="value" checked />\r
        </span>\r
        <span id="group-title" class="title"></span>\r
    </summary>\r
    <div id="content">\r
        <slot id="groups-slot"></slot>\r
    </div>\r
</details>`;var Y=`:host
{
    /*** gray ***/
    --uchu-light-gray-raw: 95.57% 0.003 286.35;
    --uchu-light-gray: oklch(var(--uchu-light-gray-raw));

    --uchu-gray-raw: 84.68% 0.002 197.12;
    --uchu-gray: oklch(var(--uchu-gray-raw));

    --uchu-dark-gray-raw: 63.12% 0.004 219.55;
    --uchu-dark-gray: oklch(var(--uchu-dark-gray-raw));

    /*** red ***/
    --uchu-light-red-raw: 88.98% 0.052 3.28;
    --uchu-light-red: oklch(var(--uchu-light-red-raw));

    --uchu-dark-red-raw: 45.8% 0.177 17.7;
    --uchu-dark-red: oklch(var(--uchu-dark-red-raw));

    /*** purple ***/
    --uchu-light-purple-raw: 89.1% 0.046 305.24;
    --uchu-light-purple: oklch(var(--uchu-light-purple-raw));

    --uchu-dark-purple-raw: 39.46% 0.164 298.29;
    --uchu-dark-purple: oklch(var(--uchu-dark-purple-raw));

    /*** blue ***/
    --uchu-light-blue-raw: 89.66% 0.046 260.67;
    --uchu-light-blue: oklch(var(--uchu-light-blue-raw));

    --uchu-blue-raw: 62.39% 0.181 258.33;
    --uchu-blue: oklch(var(--uchu-blue-raw));

    --uchu-dark-blue-raw: 43.48% 0.17 260.2;
    --uchu-dark-blue: oklch(var(--uchu-dark-blue-raw));

    /*** green ***/
    --uchu-light-green-raw: 93.96% 0.05 148.74;
    --uchu-light-green: oklch(var(--uchu-light-green-raw));

    --uchu-green-raw: 79.33% 0.179 145.62;
    --uchu-green: oklch(var(--uchu-green-raw));

    --uchu-dark-green-raw: 58.83% 0.158 145.05;
    --uchu-dark-green: oklch(var(--uchu-dark-green-raw));

    /*** general ***/
    --uchu-yang-raw: 99.4% 0 0;
    --uchu-yang: oklch(var(--uchu-yang-raw));

    --uchu-yin-raw: 14.38% 0.007 256.88;
    --uchu-yin: oklch(var(--uchu-yin-raw));

    /*** code-tests vars ***/

    --spacer: calc(1em - 7px);
    --small-spacer: calc(var(--spacer) / 2);

    --color-success: var(--uchu-green);
    --color-fail: var(--uchu-red);
    --color-process: var(--uchu-blue);

    --text-surface: var(--uchu-yin);
    --text-result: var(--uchu-yang); /* --uchu-yang: #fdfdfd; */
    --text-collapse-icon: var(--uchu-dark-gray);  /* --uchu-dark-gray: #878a8b; */
    --text-hook-summary: var(--uchu-dark-purple);
    --text-success: var(--uchu-dark-green); /* --uchu-dark-green: #2e943a; */
    --text-fail: var(--uchu-dark-red); /* --uchu-dark-red: #a30d30; */
    --text-process: var(--uchu-dark-blue); /* --uchu-dark-blue: #0949ac; */
    --text-button: var(--uchu-yang); /* --uchu-dark-blue: #0949ac; */
    --text-placeholder: var(--uchu-dark-gray);

    --surface-0: var(--uchu-light-gray);
    --surface-test: var(--uchu-yang);
    --surface-test-summary: var(--uchu-gray);
    --surface-hook-summary: var(--uchu-light-purple);
    --surface-success: var(--uchu-light-green);
    --surface-fail: var(--uchu-light-red);
    --surface-process: var(--uchu-light-blue);
    --surface-button: var(--uchu-blue); /* --uchu-blue: #3984f2 */
    --surface-button-hover: var(--uchu-light-blue);
    --surface-button-active: var(--uchu-dark-blue);
    --surface-button-cancel: var(--uchu-dark-blue);

    --border-test: solid 1px var(--uchu-dark-gray);
    --border-hook: solid 1px var(--uchu-dark-purple);
    --border-success: solid 1px var(--uchu-dark-green);
    --border-fail: solid 1px var(--uchu-dark-red);
    --border-process: solid 1px var(--uchu-dark-blue);
    --border-button: solid 1px var(--uchu-blue);

    --success-icon: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%232e943a" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>');
    --info-icon: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2022.812714%2022.814663%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20style%3D%22fill%3Atransparent%3Bstroke%3Atransparent%3Bstroke-width%3A0.999999%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dasharray%3Anone%3Bstroke-dashoffset%3A29.2913%3Bstroke-opacity%3A1%22%20d%3D%22M%2022.295505%2C11.407332%20A%2010.889144%2C10.889144%200%200%201%2011.406424%2C22.296479%2010.889144%2C10.889144%200%200%201%200.51720881%2C11.407332%2010.889144%2C10.889144%200%200%201%2011.406424%2C0.51818382%2010.889144%2C10.889144%200%200%201%2022.295505%2C11.407332%20Z%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22m%2013.945668%2C4.3053761%20c%200.150778%2C-0.96462%20-0.30687%2C-1.43709%20-1.36997%2C-1.43709%20-1.063%2C0%20-1.668452%2C0.47247%20-1.81923%2C1.43709%20-0.150779%2C0.96462%200.306971%2C1.43708%201.369971%2C1.43708%201.004%2C0%201.66845%2C-0.47246%201.819229%2C-1.43708%20z%20M%2011.693889%2C17.829726%2013.373994%2C7.0811161%20h%20-2.9333%20L%208.7605887%2C17.829726%20Z%22%20style%3D%22font-size%3A19.6861px%3Bfont-family%3APassageway%3B-inkscape-font-specification%3APassageway%3Bfill%3A%23a30d30%3Bstroke-width%3A2.5%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dashoffset%3A29.2913%22%20aria-label%3D%22i%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E');

    --font-text: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

    /*** styles ***/

    color-scheme: light dark;
    display: grid;
    gap: var(--spacer);
    background-color: var(--surface-0);
    color: var(--text-surface); 
    padding: var(--small-spacer);
    font-family: var(--font-text);
}

#header
{
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: var(--spacer);
    border-bottom: solid 2px;
    padding: var(--spacer);
    margin-bottom: var(--spacer);
    user-select: none;
}

#title
{
    font-weight: bold;
    font-size: 16px;
}

.hook
{
    display: none;
}
:host(.has-before-hook) #before-all-details
,:host(.has-after-hook) #after-all-details
{
    display: initial;
}
:host(.has-required-before-hook) #required-before-any-details
,:host(.has-required-after-hook) #required-after-any-details
{
    display: initial;
}

#required-before-any-summary
,#required-after-any-summary
{
    background: var(--surface-process);
    color: var(--text-process);
    border: solid 1px var(--text-process);
    grid-template-columns: auto auto 1fr;
}

#tests
{
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    grid-auto-rows: max-content;
    gap: var(--spacer);
}

summary
{
    display: grid;
    gap: var(--spacer);
    padding: var(--small-spacer) var(--spacer);
    align-items: center;
}
summary::before
{
    content: '';
    width: 16px;
    height: 16px;
    background: url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'14px'%20height%3D'14px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23878a8b'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");
    transform: rotate(-90deg);
    transition: transform ease-out 200ms;
}
[open] > summary::before
{
    transform: rotate(0);
    /* background: var(--surface-test-summary); */
}

:host(.running) .run[data-all]
{
    color: var(--text-surface);
    background-color: oklch(89.68% 0.002 197.12);
    border-color: oklch(63.12% 0.004 219.55);
}
:host(.running) .run[data-all]:hover
{
    background-color: oklch(95.57% 0.003 286.35);
    border-color: oklch(63.12% 0.004 219.55);
}
:host(.running) .run[data-all]:active
{
    background-color: oklch(63.12% 0.004 219.55);
    border-color: oklch(53.12% 0.004 219.55);
}
:host(.running) .run[data-all]::before
{
    display: none;
}

#before-all-summary
,#after-all-summary
{
    background: var(--surface-hook-summary);
    color: var(--text-hook-summary);
    grid-template-columns: auto auto 1fr;
}

.result-icon
{
    --background-size: 24px;
    width: var(--background-size);
    height: var(--background-size);

    display: flex;
    align-items: center;
    justify-content: center;

    border: solid 1px currentColor;
    border-radius: 50%;
}
.result-icon::before
{
    content: '\u22EF';
}

.hook
{
    border: var(--border-hook);
}

.test
,#before-all-details
,#after-all-details
{
    border: var(--border-test);
    border-radius: 2px;
}

.test summary
{
    background: var(--surface-test-summary);
    grid-template-columns: auto auto 1fr auto;
}

.test.running .result-icon
,.hook.running .result-icon
{
    border: var(--border-process);
    background: var(--surface-process);
}
.test.success .result-icon
,.hook.success .result-icon
{
    border: var(--border-success);
    background: var(--surface-success)
    var(--success-icon);
    background-repeat: no-repeat;
    background-position: center;
    background-size: var(--icon-size, 16px) var(--icon-size, 16px);
}
.test.fail .result-icon
,.hook.fail .result-icon
{
    border: var(--border-fail);
    background: var(--surface-fail)
    var(--info-icon);
    background-repeat: no-repeat;
    background-position: center;
    transform: rotate(175deg);
}
.test:is(.success,.fail) .result-icon::before
,.hook:is(.success,.fail) .result-icon::before
{
    display: none;
}
.test:is(.running) .result-icon::before
,.hook:is(.running) .result-icon::before
{
    content: '';
    --color: var(--text-process);
    --animation-timing-function: linear;
    --animation-duration: 2s;
    width: var(--icon-size, 18px);
    height: var(--icon-size, 18px);
    mask-image: radial-gradient(circle at 50% 50%, transparent calc(var(--icon-size, 18px) / 3), black calc(var(--icon-size, 18px) / 3));
    background-image: conic-gradient(transparent, transparent 135deg, var(--color));
    border-radius: 50%;
    animation: var(--animation-timing-function) var(--animation-duration) infinite spin;
    margin: 2px;
}

.description
{
    user-select: none;
}

.test .result
,.hook .result
{
    background: var(--surface-test);
    border: var(--border-test);
    border-radius: 2px;
    margin: var(--small-spacer);
}

.test .result:empty::before
,.results:empty::before
{
    content: "[Test has not been run]";
    font-style: italic;
    font-size: 11px;
    color: var(--text-placeholder);
}
.results:empty::before
{
    content: "[Tests have not been run]";
}
.before-result:empty
,.after-result:empty
{
    display: none;
}

.test .result
,.results
,.before-result
,.after-result
{
    padding: var(--small-spacer) var(--spacer);
}

pre
{
    margin: var(--small-spacer);
}

.run
{
    width: auto;
    min-width: auto;
    max-width: auto;
    appearance: none;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: 3px 10px 3px 7px;
    font-size: 11px;
    gap: var(--small-spacer);
    border: var(--border-button);
    background: var(--surface-button);
    border-radius: 4px;
    text-shadow: 1px 1px rgb(0 0 0 / .2);
    color: var(--text-button);
}
.run:hover
{
    background: oklch(68.39% 0.181 258.33);
}
.run:active
{
    background: oklch(50.39% 0.181 258.33);
}
.run::before
{
    content: '';
    display: block;
    width: 16px;
    height: 16px;
    transform: rotate(-90deg);
    background: 
    url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'16px'%20height%3D'16px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23fdfdfd'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}


@media (prefers-color-scheme: dark) 
{
    :host
    {
        --text-surface: var(--uchu-yang);
        --text-result: var(--uchu-yang);

        --surface-0: var(--uchu-yin);
        --surface-test: oklch(25.11% 0.006 258.36);
        --surface-test-summary: oklch(35.02% 0.005 236.66);
    }
    :host(.running) .run[data-all]
    {
        background-color: oklch(35.02% 0.005 236.66);
        border-color: oklch(35.02% 0.005 236.66);
    }
    :host(.running) .run[data-all]:hover
    {
        background-color: oklch(63.12% 0.004 219.55);
        border-color:oklch(63.12% 0.004 219.55);
    }
    :host(.running) .run[data-all]:active
    {
        background-color: oklch(25.11% 0.006 258.36);
        border-color: oklch(25.11% 0.006 258.36);
    }
}

@keyframes spin
{
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}`,V=`<slot name="header">
    <header id="header">
        <span id="title"><slot name="title"><span id="title-text">Tests</span></slot></span>
        <slot name="play-button">
            <button type="button" class="run" data-all>
                <slot name="play-button-label">
                    <span id="play-button-label" class="button-label label icon">Run Tests</span>
                </slot>
            </button>
        </slot>
        <slot name="details"></slot>
    </header>
</slot>
<details id="required-before-any-details" class="hook">
    <summary id="required-before-any-summary">
        <span id="required-before-any-result-icon" class="result-icon"></span>
        <span id="required-before-any-description" class="description">Results from Required Before Any Hook</span>
    </summary>
    <div id="required-before-any-results" class="results"></div>
</details>
<details id="before-all-details" class="hook">
    <summary id="before-all-summary">
        <span id="before-all-result-icon" class="result-icon"></span>
        <span id="before-all-description" class="description">Results from Before All Hook</span>
    </summary>
    <div id="before-all-results" class="results"></div>
</details>
<ul id="tests"></ul>
<details id="after-all-details" class="hook">
    <summary id="after-all-summary">
        <span id="after-all-result-icon" class="result-icon"></span>
        <span id="after-all-description" class="description">Results from After All Hook</span>
    </summary>
    <div id="after-all-results" class="results"></div>
</details>
<details id="required-after-any-details" class="hook">
    <summary id="required-after-any-summary">
        <span id="required-after-any-result-icon" class="result-icon"></span>
        <span id="required-after-any-description" class="description">Results from Required After Any Hook</span>
    </summary>
    <div id="required-after-any-results" class="results"></div>
</details>

<template id="prompt-template">
    <div class="prompt" part="prompt">
        <div class="prompt-display">
            <span class="icon prompt-icon"></span>
            <span class="label prompt-label"></span>
        </div>
        <div class="prompt-actions">
            <button class="prompt-button accept" type="button">Accept</button>
            <button class="prompt-button reject" type="button">Reject</button>
        </div>
    </div>
</template>`,C=class extends Promise{async toBeDefined(r){if(await this==null)throw new Error(`${r??"Value"} is undefined`)}async toBe(r,t=!1){let s=await this;if((t==!0?s===r:s==r)==!1)throw new Error(`  Value is not equal.
  Expected: ${r}
  Result: ${s}`)}async toContainText(r){let t=await this}async toHaveAttribute(r){let t=await this;if(!(t instanceof HTMLElement))throw new Error("Unable to check for attribute on non-HTMLElement target");if(t.getAttribute(r))throw new Error("Taret does not have attribute")}},B=class M{static timeoutMS=500;static#e;static#t;static expect(t){return new C(async(e,a)=>{if(t instanceof Promise){let n=await t;e(n);return}e(t)})}static expectSync(t){return new C(async(e,a)=>{if(t instanceof Promise){let n=await t;e(n);return}e(t)})}static expectBefore(t){return new C(async(e,a)=>{if(t instanceof Promise){let n=await t;e(n);return}e(t)})}static async prompt(t,s,e,a){return new Promise((n,i)=>{let l=t.findElement("prompt-template"),o=M.createElementFromTemplate(l);o.querySelector(".label").textContent=e;let u=c=>{let m=c.composedPath();if(m.find(p=>p instanceof HTMLButtonElement&&p.classList.contains("accept"))!=null){let p=a?.onAccept?.()??!0;o.removeEventListener("click",u),n(p);return}if(m.find(p=>p instanceof HTMLButtonElement&&p.classList.contains("reject"))!=null){let p=a?.onReject?.()??!1;o.removeEventListener("click",u),n(p);return}};o.addEventListener("click",u),a?.acceptLabel!=null&&(o.querySelector(".accept").textContent=a.acceptLabel),a?.rejectLabel!=null&&(o.querySelector(".reject").textContent=a.rejectLabel);let d=s instanceof HTMLDetailsElement?s:s.querySelector(".test-details");d!=null&&(d.open=!0),s.querySelector(".result")?.append(o)})}static createElementFromTemplate(t,s){let e=t instanceof HTMLTemplateElement?t:document.querySelector(t);if(e==null)throw new Error(`Unable to find template element from selector: ${t}`);let a=e.content.cloneNode(!0).querySelector("*");if(a==null)throw new Error("Unable to find first child of template element");return s?.append(a),a}};function oe(r){return B.expect(r)}function le(r,t,s,e){return B.prompt(r,t,s,e)}var D=":not(slot,defs,g,rect,path,circle,ellipse,line,polygon,text,tspan,use,svg image,svg title,desc,template,template *)";function W(r){let t=[...r.querySelectorAll(`${D}[id]`)];for(let e=0;e<t.length;e++)t[e].part.add(t[e].id);let s=[...r.querySelectorAll(`${D}[class]`)];for(let e=0;e<s.length;e++)s[e].part.add(...s[e].classList)}var Q=(r=>(r.BeforeAll="beforeall",r.AfterAll="afterall",r.BeforeEach="beforeeach",r.AfterEach="aftereach",r.RequiredBeforeAny="requiredbeforeany",r.RequiredAfterAny="requiredafterany",r))(Q||{}),x=(r=>(r.BeforeAll="beforeall",r.AfterAll="afterall",r.BeforeTest="beforetest",r.AfterTest="aftertest",r.Cancel="cancel",r))(x||{}),k=Symbol("No Test Defined"),P=new CSSStyleSheet;P.replaceSync(Y);var R="code-tests",J=class extends HTMLElement{componentParts=new Map;getElement(r){if(this.componentParts.get(r)==null){let t=this.findElement(r);t!=null&&this.componentParts.set(r,t)}return this.componentParts.get(r)}findElement(r){return this.shadowRoot.getElementById(r)}#e={};#t=!0;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=V,this.shadowRoot.adoptedStyleSheets.push(P),this.#n=this.#h.bind(this)}connectedCallback(){if(W(this.shadowRoot),this.addEventListener("click",this.#n),this.getAttribute("auto")=="false")return;let r=this.#d();r!=null&&this.loadTests(r)}disconnectedCallback(){this.removeEventListener("click",this.#n)}#n;#h(r){let t=r.composedPath().find(n=>n instanceof HTMLButtonElement&&n.classList.contains("run"));if(t==null)return;let s=t.closest("li");if(s==null){if(t.hasAttribute("data-all")==!0)if(this.classList.contains("running")){if(this.classList.contains("canceled"))return;this.cancel()}else this.runTests();return}let e=s.dataset.testId;if(e==null)return;let a=this.#s.get(e);a!=null&&(this.isCanceled=!1,this.classList.remove("canceled"),this.part.remove("canceled"),this.#u(e,a))}#d(){return this.getAttribute("src")??this.getAttribute("test")??this.getAttribute("tests")??this.getAttribute("run")??this.getAttribute("path")}async loadTests(r){let t=r??this.#d();if(t!=null)try{this.getElement("tests").innerHTML="",this.#s.clear(),this.classList.remove("has-before-hook"),this.classList.remove("has-after-hook");let s=window.location.href.lastIndexOf("/"),a=window.location.href.substring(s).indexOf(".")!=-1==!0?window.location.href.substring(0,s+1):window.location.href,n=a+t.substring(0,t.lastIndexOf("/")+1),i=a+t,l=await(await fetch(i)).text();l=l.replaceAll(/['"`](((\.\/)|(\.\.\/))+(.*))['"`]/g,`'${n}$1'`);let o=new File([l],t.substring(t.lastIndexOf("/")),{type:"text/javascript"}),d=await import(URL.createObjectURL(o)),c=d.tests??d.default;if(c==null)throw new Error(`Unable to find tests definition in file at path: ${t}`);let m=c.beforeall;m!=null&&(this.#e.beforeall=m,delete c.beforeall,this.classList.add("has-before-hook"));let g=c.afterall;g!=null&&(this.#e.afterall=g,delete c.afterall,this.classList.add("has-after-hook"));let f=c.beforeeach;f!=null&&(this.#e.beforeeach=f,delete c.beforeeach);let p=c.aftereach;p!=null&&(this.#e.aftereach=p,delete c.aftereach);let h=c.requiredbeforeany;h!=null&&(this.#e.requiredbeforeany=h,delete c.requiredbeforeany,this.classList.add("has-required-before-hook"),this.part.add("has-required-before-hook"));let A=c.requiredafterany;A!=null&&(this.#e.requiredafterany=A,delete c.requiredafterany,this.classList.add("has-required-after-hook"),this.part.add("has-required-after-hook"));for(let[N,I]of Object.entries(c))this.#m(N,I)}catch(s){this.#c("An error occurred while loading the tasks:",s)}}isCanceled=!1;cancel(){this.isCanceled=!0,this.classList.add("canceled"),this.part.add("canceled"),this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}async runTests(){this.dispatchEvent(new CustomEvent("beforeall",{bubbles:!0,composed:!0})),this.#t=!0,this.classList.add("running"),this.isCanceled=!1,this.classList.remove("canceled"),this.part.remove("canceled"),this.toggleAttribute("success",!1);let r=this.findElement("play-button-label");r!=null&&(r.textContent="Cancel"),this.#f();let t=this.hasAttribute("in-order"),s=this.#e.requiredbeforeany;if(s!=null){let l;try{let o=this.getElement("required-before-any-details");if(o.classList.add("running"),o.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");l=await s(this,o),this.#r(l,!0,"before",!0),o.part.remove("running"),o.classList.remove("running")}catch(o){this.#r(l,!1,"before",!0,o),console.error(o),this.#t=!1,this.classList.remove("running"),this.part.remove("running"),r!=null&&(r.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}}let e=this.#e.beforeall;if(e!=null){let l;try{let o=this.getElement("before-all-details");if(o.classList.add("running"),o.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");l=await e(this,o),this.#r(l,!0,"before",!1),o.part.remove("running"),o.classList.remove("running")}catch(o){this.#r(l,!1,"before",!1,o),console.error(o),this.#t=!1,this.classList.remove("running"),this.part.remove("running"),r!=null&&(r.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}}if(t==!1){let l=[];for(let[o,u]of this.#s)l.push(this.#u(o,u));await Promise.all(l)}else for(let[l,o]of this.#s){if(this.#t==!1)break;await this.#u(l,o,!1)}if(this.#t==!1){this.classList.remove("running"),this.part.remove("running"),r!=null&&(r.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}let a=this.#e.afterall;if(a!=null){let l;try{let o=this.getElement("after-all-details");if(o.classList.add("running"),o.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");l=await a(this,o),this.#r(l,!0,"after",!1),o.part.remove("running"),o.classList.remove("running")}catch(o){this.#r(l,!1,"after",!1,o),console.error(o);let u=this.#e.requiredafterany;if(u!=null){let d;try{let c=this.getElement("required-after-any-details");if(c.classList.add("running"),c.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");d=await u(this,c),this.#r(d,!0,"after",!0),c.part.remove("running"),c.classList.remove("running")}catch(c){this.#r(d,!1,"after",!0,c),console.error(c)}}this.#t=!1,this.classList.remove("running"),this.part.remove("running"),r!=null&&(r.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}}let n=this.#e.requiredafterany;if(n!=null){let l;try{let o=this.getElement("required-after-any-details");if(o.classList.add("running"),o.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");l=await n(this,o),this.#r(l,!0,"after",!0),o.part.remove("running"),o.classList.remove("running")}catch(o){this.#r(l,!1,"after",!0,o),console.error(o),this.#t=!1}}let i=this.shadowRoot.querySelectorAll('[success="false"]');this.setAttribute("success",i.length==0?"true":"false"),this.classList.remove("running"),this.part.remove("running"),r!=null&&(r.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}))}#f(){for(let[s,e]of this.#s){let a=this.getElement("tests").querySelector(`[data-test-id="${s}"]`);if(a==null){this.#c(`Unable to find test element for test: ${s}`);return}a.toggleAttribute("success",!1),a.classList.remove("success","fail"),a.part.remove("success","fail")}let r=this.getElement("before-all-details");r.toggleAttribute("success",!1),r.classList.remove("success","fail"),r.part.remove("success","fail");let t=this.getElement("after-all-details");t.toggleAttribute("success",!1),t.classList.remove("success","fail"),t.part.remove("success","fail")}async#u(r,t,s=!0){let e=this.getElement("tests").querySelector(`[data-test-id="${r}"]`);if(e==null){this.#c(`Unable to find test element for test: ${r}`);return}e.toggleAttribute("success",!1),e.classList.add("running"),e.part.add("running"),e.classList.remove("success","fail"),e.part.remove("success","fail");let a=e.querySelector(".result-icon");a?.classList.remove("success","fail"),a?.part.remove("success","fail"),a?.classList.add("running"),a?.part.add("running");let n=e.querySelector(".error-message");n!=null&&(n.textContent="");let i=e.querySelector("details");i!=null&&(i.open=!1);let l=k,o,u=k,d;try{let c=this.dispatchEvent(new CustomEvent("beforetest",{bubbles:!0,cancelable:!0,composed:!0,detail:{testElement:e}}));if(s==!0){let f=this.#e.requiredbeforeany;if(f!=null){let p;try{let h=this.getElement("required-before-any-details");if(h.classList.add("running"),h.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");p=await f(this,h),this.#r(p,!0,"before",!0),h.part.remove("running"),h.classList.remove("running")}catch(h){this.#r(p,!0,"before",!0,h),console.error(h),this.#t=!1;return}}}if(this.#t==!1)throw new Error("Tests have been disabled from continuing to run.");if(c==!1||this.isCanceled==!0)throw new Error("Test has been cancelled");let m=this.#e.beforeeach;if(m!=null&&(l=await m(this,e)),this.isCanceled==!0)throw new Error("Test has been cancelled");if(o=await t(this,e),this.isCanceled==!0)throw new Error("Test has been cancelled");let g=this.#e.aftereach;if(g!=null&&(u=await g(this,e)),s==!0){let f=this.#e.requiredafterany;if(f!=null){let p;try{let h=this.getElement("required-before-any-details");if(h.classList.add("running"),h.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");p=await f(this,h),this.#r(p,!0,"after",!0),h.part.remove("running"),h.classList.remove("running")}catch(h){this.#r(p,!0,"after",!0,h),console.error(h),this.#t=!1;return}}}d="before",l!=k&&this.#o(e,l,!0,void 0,d),d=void 0,this.#o(e,o,!0,void 0,d),d="after",u!=k&&this.#o(e,u,!0,void 0,d)}catch(c){this.#o(e,o,!1,c,d),console.error(c),this.#t=!1}finally{e?.classList.remove("running"),e?.part.remove("running"),a?.classList.remove("running"),a?.part.remove("running"),this.dispatchEvent(new CustomEvent("aftertest",{bubbles:!0,cancelable:!0,composed:!0,detail:{testElement:e}}))}}#o(r,t,s,e,a){if(t instanceof HTMLElement)this.#l(r,t,s,a);else if(t==null){let i=a==null?"Passed":"Hook Ran Successfully",l=this.#a(s==!0?`${i}`:`Failed${e!=null?`:
${e.message}`:""}`,s,a);this.#l(r,l,s,a)}else if(typeof t=="string"){let i=this.#a(`${t}${e==null?"":`:
${e.message}`}`,s,a);this.#l(r,i,s,a)}else if(typeof t=="object"){let i=t;if(i.success!=null&&i.expected!=null&&i.value!=null){let l=a==null?"Passed":"Success",o=a==null?"Failed":"Fail",u=this.#a(`${i.success==!0?`${l}:`:`${o}:`}
Expected:${i.expected}
Result:${i.value}`,i.success,a);this.#l(r,u,s,a)}}let n=r.querySelector("details");n!=null&&(n.open=!0)}#r(r,t,s,e,a){if(r instanceof HTMLElement)this.#i(r,t,s,e);else{let i;if(r==null)i=this.#a(t==!0?"Hook Ran Successfully":`Failed${a!=null?`:
${a.message}`:""}`,t),this.#i(i,t,s,e);else if(typeof r=="string")i=this.#a(`${r}${a==null?"":`:
${a.message}`}`,t),this.#i(i,t,s,e);else if(typeof r=="object"){let l=r;l.success!=null&&l.expected!=null&&l.value!=null&&(i=this.#a(`${l.success==!0?"Success:":"Fail:"}
Expected:${l.expected}
Result:${l.value}`,l.success),this.#i(i,t,s,e))}}let n=this.getElement(`${s}-all-details`);n!=null&&(n.open=!0)}static create(r){return document.createElement("code-tests")}#s=new Map;#m(r,t){let s=K();this.#s.set(s,t);let e=this.#g(s,r);return this.getElement("tests").append(e),s}#g(r,t){let s=document.createElement("li");s.dataset.testId=r,s.classList.add("test"),s.part.add("test");let e=document.createElement("details");e.classList.add("test-details"),e.part.add("test-details");let a=document.createElement("summary");a.classList.add("test-summary"),a.part.add("test-summary");let n=document.createElement("div");n.classList.add("result-icon"),n.part.add("result-icon"),a.append(n);let i=document.createElement("span");i.classList.add("description","test-description"),i.textContent=t,a.append(i);let l=document.createElement("button");l.classList.add("run","test-run"),l.part.add("run","test-run"),l.textContent="Run Test",l.title="Run Test",a.append(l);let o=document.createElement("div");o.classList.add("before-result","test-before-result"),o.part.add("before-result","test-before-result");let u=document.createElement("div");u.classList.add("result","test-result"),u.part.add("result","test-result");let d=document.createElement("div");return d.classList.add("after-result","test-after-result"),d.part.add("after-result","test-after-result"),e.append(a),e.append(o),e.append(u),e.append(d),s.append(e),s}#l(r,t,s,e){r.setAttribute("success",s==!0?"true":"false"),r.classList.toggle("success",s),r.part.toggle("success",s),r.classList.toggle("fail",!s),r.part.toggle("fail",!s);let a=r.querySelector(".result-icon");a?.classList.toggle("success",s),a?.part.toggle("success",s),a?.classList.toggle("fail",!s),a?.part.toggle("fail",!s);let n=r.querySelector(`.${e==null?"result":e=="before"?"before-result":"after-result"}`);if(n==null){this.#c("Unable to find result element");return}n.innerHTML="",n.appendChild(t)}#a(r,t,s){let e=document.createElement("code");e.classList.add("code"),e.part.add("code");let a=document.createElement("pre");a.textContent=r;let n=t==!0?"success-message":"error-message";return a.classList.add("pre",n),a.part.add("pre",n),e.appendChild(a),e}#i(r,t,s,e){let a=e==!0?`required-${s}-any`:`${s}-all`,n=this.getElement(`${a}-details`),i=this.getElement(`${a}-results`);n.setAttribute("success",t==!0?"true":"false"),n.classList.toggle("success",t),n.part.toggle("success",t),n.classList.toggle("fail",!t),n.part.toggle("fail",!t),i.innerHTML="",i.appendChild(r)}#c(r,t){t instanceof Error&&(r+=`
${t.message}`,console.error(t));let s=document.createElement("li");s.classList.add("error","process-error"),s.part.add("error","process-error");let e=document.createElement("code");e.classList.add("code","process-error-code"),e.part.add("code","process-error-code");let a=document.createElement("pre");a.classList.add("pre","process-error-pre"),a.part.add("pre","process-error-pre"),a.textContent=r,e.append(a),s.append(e),this.getElement("tests").append(s)}#p(r){if(r=="ordered"){let t=this.shadowRoot.querySelector("ul");if(t==null)return;let s=this.shadowRoot?.querySelectorAll("li"),e=document.createElement("ol");s!=null&&e.append(...s),e.id="tests",t.replaceWith(e)}else{let t=this.shadowRoot.querySelector("ol");if(t==null)return;let s=this.shadowRoot?.querySelectorAll("li"),e=document.createElement("ul");e.id="tests",s!=null&&e.append(...s),t.replaceWith(e)}}static observedAttributes=["in-order"];attributeChangedCallback(r,t,s){r=="in-order"&&(s==null?this.#p("unordered"):this.#p("ordered"))}};function K(){let r=new Uint8Array(20);crypto.getRandomValues(r);let t=[].slice.apply(r).map(function(e){return String.fromCharCode(e)}).join("");return btoa(t).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}customElements.get(R)==null&&customElements.define(R,J);var $=new CSSStyleSheet;$.replaceSync(`
    ${q}`);var X=`${F}
`,H="test-group",b=class extends HTMLElement{findElement(t){return this.shadowRoot.getElementById(t)}get enabled(){return this.findElement("enable-value")?.checked}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=X,this.shadowRoot.adoptedStyleSheets.push($)}connectedCallback(){this.findElement("details").open=!0;let t=this.findElement("groups-slot");t.addEventListener("slotchange",()=>{let e=t.assignedElements().find(a=>a.tagName=="CODE-TESTS");if(e!=null){let a=e.shadowRoot.querySelector("#header");a?.style.setProperty("display","none");let n=(e.querySelector('[slot="title"]')??a?.querySelector("#title-text"))?.textContent;n!=null&&(this.findElement("group-title").textContent=n);let i=a?.querySelector("button.run");i!=null&&this.findElement("summary").append(i),e.loadTests()}}),E(this.shadowRoot),v(this.shadowRoot),y(this.shadowRoot),this.addEventListener(x.BeforeAll,()=>{this.classList.remove("success","fail"),this.part.remove("success","fail"),this.classList.add("running"),this.part.add("running")}),this.addEventListener(x.AfterAll,()=>{this.classList.remove("running"),this.part.remove("running");let e=t.assignedElements().find(n=>n.tagName=="CODE-TESTS");e!=null&&e.hasAttribute("success")==!0?(this.classList.add("success"),this.part.add("success")):(this.classList.add("fail"),this.part.add("fail"));let a=this.findElement("play-button-label");a!=null&&(a.textContent="Run Tests")})}runTests(){if(this.classList.contains("running")){if(this.classList.contains("canceled"))return;this.querySelector("code-tests")?.cancel();return}let t=this.findElement("play-button-label");return t!=null&&(t.textContent="Cancel"),this.querySelector("code-tests")?.runTests()}};customElements.get(H)==null&&customElements.define(H,b);var z=new CSSStyleSheet;z.replaceSync(`
    ${T}`);var ee=`${S}
`,j="test-runner",L=class extends HTMLElement{findElement(t){return this.shadowRoot.getElementById(t)}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=ee,this.shadowRoot.adoptedStyleSheets.push(z),this.#n();let t=this.findElement("subject-slot");t.addEventListener("slotchange",()=>{let s=t.assignedElements();s.length==0?(this.classList.add("empty"),this.part.add("empty")):(this.classList.remove("empty"),this.part.remove("empty"));let e=[];for(let a=0;a<s.length;a++){let n=s[a];n.tagName==="CODE-TESTS"&&e.push(n)}this.updateTests(e)}),E(this.shadowRoot),v(this.shadowRoot),y(this.shadowRoot)}updateTests(t){let s=[];for(let e=0;e<t.length;e++){let a=t[e],n=this.#t(a);s.push(n)}this.findElement("test-group-items").append(...s)}async runAllTests(){let t=this.shadowRoot.querySelectorAll("test-group");for(let s=0;s<t.length;s++){let e=t[s];e.enabled!=!1&&await e.runTests()}}async#e(t){let s=t.composedPath().filter(n=>n instanceof HTMLElement);if(s.find(n=>n instanceof HTMLButtonElement&&n.id=="run-all")!=null){if(this.classList.contains("running"))return;this.runAllTests();return}let a=s.find(n=>n instanceof HTMLButtonElement&&n.classList.contains("run")&&n.hasAttribute("data-all"));if(a!=null){let n=a.getRootNode().host;n!=null&&n instanceof b&&n.runTests()}}#t(t){let s=document.createElement("test-group");return s.append(t),s}#n(){this.addEventListener("click",this.#e)}};customElements.get(j)==null&&customElements.define(j,L);export{x as CodeTestEventType,B as CodeTests,J as CodeTestsElement,Q as HookType,L as TestRunnerElement,oe as expect,le as prompt};
